@startuml Диаграмма последовательности MVP формирования рекомендаций

actor Аналитик
participant "Модуль сбора данных"
participant "Сервис очистки данных"
participant "Внешние источники"
participant "Аналитический модуль"
participant "Модуль рекомендаций"
participant "Генератор отчетов"

activate Аналитик

Аналитик -> "Модуль сбора данных": 1. Запуск сбора данных\n(регион, период)
activate "Модуль сбора данных"
"Модуль сбора данных" -> "Внешние источники": 2. Получение сырых данных
activate "Внешние источники"
"Внешние источники" --> "Модуль сбора данных": 3. Возврат данных
deactivate "Внешние источники"

"Модуль сбора данных" -> "Сервис очистки данных": 4. Фильтрация и нормализация
activate "Сервис очистки данных"
"Сервис очистки данных" --> "Модуль сбора данных": 5. Очищенный датасет (ID:123)
deactivate "Сервис очистки данных"

"Модуль сбора данных" --> Аналитик: 6. Уведомление о готовности
deactivate "Модуль сбора данных"

Аналитик -> "Аналитический модуль": 7. Запуск анализа (ID:123)
activate "Аналитический модуль"
"Аналитический модуль" -> "Аналитический модуль": 8. Выявление ключевых тем\nи гео-распределения
"Аналитический модуль" --> Аналитик: 9. Результаты анализа
deactivate "Аналитический модуль"

Аналитик -> "Модуль рекомендаций": 10. Генерация предложений\n(бюджет, приоритеты)
activate "Модуль рекомендаций"
"Модуль рекомендаций" -> "Модуль рекомендаций": 11. Расчет распределения
"Модуль рекомендаций" --> Аналитик: 12. Черновик рекомендаций
deactivate "Модуль рекомендаций"

Аналитик -> "Модуль рекомендаций": 13. Ручная корректировка
activate "Модуль рекомендаций"
"Модуль рекомендаций" --> Аналитик: 14. Обновленный вариант
deactivate "Модуль рекомендаций"

Аналитик -> "Генератор отчетов": 15. Создание финального отчета
activate "Генератор отчетов"
"Генератор отчетов" --> Аналитик: 16. Отчет в PDF/Excel
deactivate "Генератор отчетов"

deactivate Аналитик

@enduml